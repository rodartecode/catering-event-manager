# =============================================================================
# CATERING EVENT MANAGER - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# Also copy to apps/web/.env.local and apps/scheduling-service/.env
#
# REQUIRED VARIABLES (must be set):
#   - DATABASE_URL, NEXTAUTH_SECRET, NEXTAUTH_URL, SCHEDULING_SERVICE_URL, PORT
# OPTIONAL VARIABLES (have sensible defaults):
#   - LOG_LEVEL, NODE_ENV, NEXT_PUBLIC_DEVELOPMENT, ANALYTICS_CACHE_TTL, CONFLICT_CACHE_TTL

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# PostgreSQL connection string used by both Next.js and Go services
# Format: postgresql://username:password@host:port/database_name
#
# Development (Docker): postgresql://admin:changeme@localhost:5432/catering_events
# Development (local):  adjust username/password as needed
#
# Production (Supabase): postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres
#   - Get connection string from: Supabase Dashboard → Settings → Database → Connection String
#   - Use "Session Mode" connection string for Vercel/serverless
#   - Current project: mjcoyhnecepcizffppzq (us-west-2)
#   - Demo data available at: https://catering-event-manager.vercel.app
#
DATABASE_URL="postgresql://admin:changeme@localhost:5432/catering_events"

# =============================================================================
# NEXT.JS WEB APPLICATION
# =============================================================================
# Next-Auth secret key for session encryption
# REQUIRED: Generate a secure secret with: openssl rand -base64 32
# This must be the same in .env and apps/web/.env.local
NEXTAUTH_SECRET="your-secure-secret-key-32-characters-long"

# Next-Auth URL (used for OAuth callbacks and session management)
#
# Development: http://localhost:3000
# Production (Vercel): https://catering-dev.vercel.app
#
NEXTAUTH_URL="http://localhost:3000"

# =============================================================================
# MICROSERVICES COMMUNICATION
# =============================================================================
# URL for Go Fiber scheduling service (used by Next.js app)
# This should match where your Go service is running
#
# Development: http://localhost:8080
# Production (Fly.io): https://catering-scheduler-dev.fly.dev
#
SCHEDULING_SERVICE_URL="http://localhost:8080"

# =============================================================================
# GO SCHEDULING SERVICE
# =============================================================================
# Port for Go Fiber service to listen on
# Must match the port in SCHEDULING_SERVICE_URL above
PORT=8080

# Go service log level
# Options: debug, info, warn, error
LOG_LEVEL="info"

# =============================================================================
# DEVELOPMENT & DEPLOYMENT
# =============================================================================
# Node.js environment
# Development: "development"
# Production: "production"
NODE_ENV="development"

# Enable development features
# Set to "true" in development, "false" in production
NEXT_PUBLIC_DEVELOPMENT="true"

# =============================================================================
# ANALYTICS & CACHING
# =============================================================================
# Analytics cache TTL in seconds (default: 300 = 5 minutes)
# Helps meet SC-005 requirement (<10 second report generation)
ANALYTICS_CACHE_TTL="300"

# Resource conflict cache TTL in seconds (default: 30)
# High-performance caching for scheduling algorithms
CONFLICT_CACHE_TTL="30"

# =============================================================================
# CLIENT PORTAL EMAIL (Magic Link Authentication)
# =============================================================================
# Resend API key for sending magic link emails
# Get your API key at: https://resend.com/api-keys
# Required for client portal authentication
RESEND_API_KEY=""

# Email address that magic link emails are sent from
# Must be a verified domain in Resend
# Example: "noreply@your-domain.com" or "Catering Events <noreply@your-domain.com>"
EMAIL_FROM="noreply@example.com"

# =============================================================================
# SECURITY: RATE LIMITING (Production)
# =============================================================================
# Upstash Redis for distributed rate limiting in production deployments
# Provides sliding window rate limiting across multiple instances
# Uses in-memory fallback when not configured (suitable for development/single-instance)
# Get credentials at: https://upstash.com/
UPSTASH_REDIS_REST_URL=""
UPSTASH_REDIS_REST_TOKEN=""

# =============================================================================
# SECURITY: CORS (Production)
# =============================================================================
# Comma-separated list of additional allowed origins for CSP connect-src
# Defaults to SCHEDULING_SERVICE_URL if not set
# Example: "https://api.example.com,https://cdn.example.com"
ALLOWED_ORIGINS=""

# =============================================================================
# OPTIONAL: EXTERNAL INTEGRATIONS
# =============================================================================
# Email service for notifications (legacy SMTP, not recommended)
# SMTP_HOST=""
# SMTP_PORT=""
# SMTP_USER=""
# SMTP_PASS=""

# File upload service (not yet implemented)
# S3_BUCKET=""
# S3_REGION=""
# S3_ACCESS_KEY=""
# S3_SECRET_KEY=""
